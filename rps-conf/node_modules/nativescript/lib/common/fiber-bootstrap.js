"use strict";
const fiber = require("fibers");
const Future = require("fibers/future");
function run(action) {
    if (fiber.current) {
        action();
    }
    else {
        fiber(() => {
            action();
            $injector.dispose();
            Future.assertNoFutureLeftBehind();
        }).run();
    }
}
exports.run = run;
